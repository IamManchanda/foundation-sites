// Foundation for Sites by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

////
/// @group typography-dropcaps
////

/// Number of lines against the rest of the content.
/// @type Number
$dropcaps-lines: 3 !default;

/// Line height for the rest of the content.
/// @type Number
$dropcaps-line-height: 1.6 !default;

/// If `true`, makes dropcaps uppercase.
/// @type Boolean
$dropcaps-uppercase: true !default;

/// Dropcaps component
/// @param { Number } $lines [$dropcaps-lines] Number of lines against the rest of the content.
/// @param { Number } $line-height [$dropcaps-line-height] Line height for the rest of the content.
/// @param { Boolean } $uppercase [$dropcaps-uppercase] If `true`, makes dropcaps uppercase.
@mixin dropcaps(
  $lines: $dropcaps-lines,
  $line-height: $dropcaps-line-height,
  $uppercase: $dropcaps-uppercase
) {
  // Default margin right (Arial/Helvetica) for having a tiny space between them through the right,
  // See: http://code.stephenmorley.org/html-and-css/creating-drop-caps
  $-margin-right: 0.0962em;

  // Font metrics (for Helvetica Neue)
  $mt: (15.6 / 100); // Distance between Ascent and Top
  $mb: (13.2 / 100); // Distance between Baseline and Bottom

  // Maths Magic for dropcaps to calculate font size, margin top and margin bottom
  $lh: $line-height;
  $n: $lines;
  $h: $n * $lh;

  $-font-size: ($h - ($lh + $mt + $mb) + 1) / (1 - ($mt + $mb));
  $-margin-top: -($mt - ($mt + ($lh - 1) / 2) / $-font-size);
  $-margin-bottom: -($mb);

  line-height: $line-height; // Disabling default line height of an element

  &::first-letter {
    float: #{$global-left};
    margin-top: $-margin-top * 1em;
    margin-bottom: $-margin-bottom * 1em;
    margin-#{$global-right}: $-margin-right;
    font-size: $-font-size * 1em;
    line-height: 1;

    @if $uppercase {
      text-transform: uppercase;
    }
  }
}

@mixin foundation-dropcaps {
  // Use to create an initial aka dropcap
  .dropcaps {
    @include dropcaps();
  }
}
